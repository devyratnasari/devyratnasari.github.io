<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<link rel="icon" type="image/x-icon" href="/assets/css/images/title.png">
		<title>Bonds</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<div class="inner" style="padding-left: 5em;">
					<a href="index.html" class="title" style="font-size: x-large;"><h2>DR</h2></a>
				</div>
				<nav>
					<ul>
						<li><a href="index.html">Back to projects</a></li>
						<li><a href="#eda">EDA</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="dataset" class="wrapper">
						<div class="inner" style="font-size: large;">
							<h1 class="major">Government bonds buyer predictions</h1>
							<p style="font-size: large;">The analysis is conducted to predict how much government bonds the company has to order based on the users behaviour.
								The dataset is sourced from Indonesia Fintech StartUp between August and October 2021.
								There are 3 datasets that the company provided:
								<ol style="font-size: large;">
									<li><b>Users information</b>  <br>
										This dataset contains:
										<ul style="list-style-type: circle;">
											<li>user_id - User's identity</li>
											<li>registration_import_datetime - Date of user registered</li>
											<li>user_gender - Gender of the user</li>
											<li>user_age - Age of the user</li>
											<li>user_occupation - Occupation of the user</li>
											<li>user_income_range - Range income of the user</li>
											<li>referral_code_used - If the user using referral code during registration or not</li>
											<li>user_income_source - The source of income from the user</li>
										</ul>
										<table>
											<thead>
												<tr style="text-align: right;">
												  <th></th>
												  <th>user_id</th>
												  <th>registration_import_datetime</th>
												  <th>user_gender</th>
												  <th>user_age</th>
												  <th>user_occupation</th>
												  <th>user_income_range</th>
												  <th>referral_code_used</th>
												  <th>user_income_source</th>
												</tr>
											  </thead>
											  <tbody>
												<tr>
												  <th>0</th>
												  <td>162882</td>
												  <td>2021-09-17</td>
												  <td>Female</td>
												  <td>51</td>
												  <td>Swasta</td>
												  <td>&gt; Rp 500 Juta - 1 Miliar</td>
												  <td>NaN</td>
												  <td>Gaji</td>
												</tr>
												<tr>
												  <th>1</th>
												  <td>3485491</td>
												  <td>2021-10-09</td>
												  <td>Female</td>
												  <td>55</td>
												  <td>Others</td>
												  <td>&gt; Rp 50 Juta - 100 Juta</td>
												  <td>NaN</td>
												  <td>Gaji</td>
												</tr>
												<tr>
												  <th>2</th>
												  <td>1071649</td>
												  <td>2021-10-08</td>
												  <td>Male</td>
												  <td>50</td>
												  <td>Swasta</td>
												  <td>Rp 10 Juta - 50 Juta</td>
												  <td>NaN</td>
												  <td>Gaji</td>
												</tr>
												<tr>
												  <th>3</th>
												  <td>3816789</td>
												  <td>2021-08-12</td>
												  <td>Female</td>
												  <td>53</td>
												  <td>IRT</td>
												  <td>&gt; Rp 50 Juta - 100 Juta</td>
												  <td>NaN</td>
												  <td>Gaji</td>
												</tr>
												<tr>
												  <th>4</th>
												  <td>3802293</td>
												  <td>2021-08-15</td>
												  <td>Female</td>
												  <td>47</td>
												  <td>PNS</td>
												  <td>&gt; Rp 500 Juta - 1 Miliar</td>
												  <td>used referral</td>
												  <td>Gaji</td>
												</tr>
											  </tbody>
										</table>
									</li>
									<li><b>Users's daily transaction</b><br>
										This dataset contains:
										<ul style="list-style-type: circle;">
											<li>user_id - Id of user, it's same with the user_id from dataset 1</li>
											<li>date - Transaction date</li>
											<li>Saham_AUM - AUM (Assets Under Management) of equity mutual fund held by client to date</li>
											<li>Saham_invested_amount - The total price paid by client to buy equity mutual fund to date.</li>
											<li>Saham_transaction_amount - Total value of transaction to buy (if positive) or sell (if negative) equity mutual fund on the date.</li>
											<li>Pasar_Uang_AUM - AUM of money market mutual fund held by client to date</li>
											<li>Pasar_Uang_invested_amount - The total price paid by client to buy money market mutual fund to date</li>
											<li>Pasar_Uang_transaction_amount - Total value of transaction to buy (if positive) or sell (if negative) money market mutual fund on the date. </li>
											<li>Pendapatan_Tetap_AUM - AUM of fixed income mutual fund held by client to date</li>
											<li>Pendapatan_Tetap_invested_amount - The total price paid by client to buy fixed income mutual fund to date</li>
											<li>Pendapatan_Tetap_transaction_amount - Total value of transaction to buy (if positive) or sell (if negative) fixed income mutual fund on the date.</li>
											<li>Campuran_AUM - AUM of mixed mutual fund held by client to date</li>
											<li>Campuran_invested_amount - The total price paid by client to buy mixed mutual fund to date</li>
											<li>Campuran_transaction_amount - Total value of transaction to buy (if positive) or sell (if negative) mixed mutual fund on the date.</li>
										<div style="overflow-x: auto; margin-top: 1em;">
											<table>
												<thead>
													<tr style="text-align: right;">
													  <th></th>
													  <th>user_id</th>
													  <th>trans_date</th>
													  <th>Saham_AUM</th>
													  <th>Saham_invested_amount</th>
													  <th>Saham_transaction_amount</th>
													  <th>Pasar_Uang_AUM</th>
													  <th>Pasar_Uang_invested_amount</th>
													  <th>Pasar_Uang_transaction_amount</th>
													  <th>Pendapatan_Tetap_AUM</th>
													  <th>Pendapatan_Tetap_invested_amount</th>
													  <th>Pendapatan_Tetap_transaction_amount</th>
													  <th>Campuran_AUM</th>
													  <th>Campuran_invested_amount</th>
													  <th>Campuran_transaction_amount</th>
													</tr>
												  </thead>
												  <tbody>
													<tr>
													  <th>0</th>
													  <td>50701</td>
													  <td>2021-08-30</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>10132277.0</td>
													  <td>10000000.0</td>
													  <td>0.0</td>
													</tr>
													<tr>
													  <th>1</th>
													  <td>50701</td>
													  <td>2021-08-31</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>10206945.0</td>
													  <td>10000000.0</td>
													  <td>0.0</td>
													</tr>
													<tr>
													  <th>2</th>
													  <td>50701</td>
													  <td>2021-09-01</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>9956556.0</td>
													  <td>10000000.0</td>
													  <td>0.0</td>
													</tr>
													<tr>
													  <th>3</th>
													  <td>50701</td>
													  <td>2021-09-02</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>9914858.0</td>
													  <td>10000000.0</td>
													  <td>0.0</td>
													</tr>
													<tr>
													  <th>4</th>
													  <td>50701</td>
													  <td>2021-09-03</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>0.0</td>
													  <td>10016360.0</td>
													  <td>10000000.0</td>
													  <td>0.0</td>
													</tr>
												  </tbody>
											</table>
										</div>
										</ul>
									</li>
									<li><b>Bonds history purchase</b><br>This dataset contains:
										<ul style="list-style: circle;">
											<li>user_id - ID of the user, same as dataset 1 and 2</li>
											<li>flag_order_bond - 1 if the user ordered bonds, 0 for the opposite</li>
											<li>bond_units_ordered - The total of bond that user ordered</li>
										</ul>
										<table>
											<thead>
												<tr style="text-align: right;">
												  <th></th>
												  <th>user_id</th>
												  <th>flag_order_bond</th>
												  <th>bond_units_ordered</th>
												</tr>
											  </thead>
											  <tbody>
												<tr>
												  <th>0</th>
												  <td>50701</td>
												  <td>1</td>
												  <td>34</td>
												</tr>
												<tr>
												  <th>1</th>
												  <td>50961</td>
												  <td>1</td>
												  <td>99</td>
												</tr>
												<tr>
												  <th>2</th>
												  <td>51883</td>
												  <td>0</td>
												  <td>0</td>
												</tr>
												<tr>
												  <th>3</th>
												  <td>53759</td>
												  <td>0</td>
												  <td>0</td>
												</tr>
												<tr>
												  <th>4</th>
												  <td>54759</td>
												  <td>1</td>
												  <td>92</td>
												</tr>
											  </tbody>
										</table>
									</li>
								</ol>
							</p>
							<div id="eda">
								<h2 class="major">Explanatory Data Analysis</h2>
								<p><div class="desc">After a quick dataset exploration, we can see the structure of the data. The next thing we will do is to dig deeper the dataset to see the user behaviour and a better understanding about the data.
									We will see how much the total of data that we have, the datatype, if there are any duplicate in our data, null value or any other problem that we need to taking care of.</div>
									<pre><code>print(f'Total Row: {data1.shape[0]} , Column: {data1.shape[1]}')
data1.info()</code></pre>
	<pre>	Total Row: 14712 , Column: 8
	RangeIndex: 14712 entries, 0 to 14711
	Data columns (total 8 columns):
	#   Column                        Non-Null Count  Dtype    
	---  ------                        --------------  -----    
	0   user_id                       14712 non-null  int64    
	1   registration_import_datetime  14712 non-null  period[D]
	2   user_gender                   14712 non-null  object   
	3   user_age                      14712 non-null  int64    
	4   user_occupation               14712 non-null  object   
	5   user_income_range             14712 non-null  object   
	6   referral_code_used            5604 non-null   object   
	7   user_income_source            14712 non-null  object   
	dtypes: int64(2), object(5), period[D](1)</pre>
<div class="desc">There are 14712 rows of data with 8 columns for the dataset 1, we can see that on the column referral_code_used there are only 5604 rows of non-null data
	the next step that we will do is to double check null value in the dataset and if any duplicate user_id since the user_id is our primary key.</div>
	<pre><code>is_duplicate_data1 = data1.user_id.duplicated().sum()
total_user = data1.user_id.count()
print(f'Total Duplicate User_ID : {is_duplicate_data1}')
print(f'Total User : {total_user}')
data1.isnull().sum()</code></pre>
	<pre>	Total Duplicate User_ID : 0
	Total User : 14712
	user_id                            0
	registration_import_datetime       0
	user_gender                        0
	user_age                           0
	user_occupation                    0
	user_income_range                  0
	referral_code_used              9108
	user_income_source                 0
	dtype: int64</pre>
<div class="desc">From the result above, it's confirmed that we have 9108 rows of null value in column referral_code_used
	and luckily we don't have any duplicate data for the user_id so we can continue to decide what to do with the null value.
	We will be checking for the unique value from each column in the dataset.</div>
<pre><code>for x in data1:
	uniqueValues = data1[x].unique()
	n_values = len(uniqueValues)
	if n_values <=50:
	print(f'Column: {x} -- total unique value: ({n_values}) {uniqueValues}')</code></pre>
<pre style="overflow-x: auto;">	Column: user_gender -- total unique value: (2) ['Female' 'Male']
	Column: user_occupation -- total unique value: (9) ['Swasta' 'Others' 'IRT' 'PNS' 'Pengusaha' 'Pensiunan' 'TNI/Polisi' 'Guru''Pelajar']
	Column: user_income_range -- total unique value: (6) ['> Rp 500 Juta - 1 Miliar' '> Rp 50 Juta - 100 Juta' 'Rp 10 Juta - 50 Juta' '< 10 Juta' '> Rp 100 Juta - 500 Juta' '> Rp 1 Miliar']
	Column: referral_code_used -- total unique value: (2) [nan 'used referral']
	Column: user_income_source -- total unique value: (10) ['Gaji' 'Keuntungan Bisnis' 'Lainnya' 'Dari Orang Tua / Anak' 'Undian' 'Tabungan' 'Warisan' 'Hasil Investasi' 'Dari Suami / istri' 'Bunga Simpanan']
	</pre>
	By checking the unique value, we can see the categorical data of each column. We notice that there are only 2 category from referral_code_used, which is nan or 'used referral'.
	We will be converting the null value to none instead of nan or deleting the data.
	<pre><code>data1.referral_code_used.fillna('None', inplace = True)
data1.referral_code_used.unique()
data1.isnull().sum()</code></pre>
	<pre style="overflow-x: auto;">	array(['None', 'used referral'], dtype=object)
	user_id                         0
	registration_import_datetime    0
	user_gender                     0
	user_age                        0
	user_occupation                 0
	user_income_range               0
	referral_code_used              0
	user_income_source              0
	dtype: int64
	</pre>
	We succesfully convert the null value to none. Then we will start our analysis by checking the user registration growth between August and October 2021.
	We will visualise the chart by daily and monthly registration.
	<pre><code>data1['registration_import_datetime'].value_counts().sort_index().plot()
plt.title('User Join Growth by Day')
data1['registration_month'] = data1.registration_import_datetime.dt.to_timestamp('m').copy()
data1.registration_month.value_counts().sort_index().plot()
plt.title('User Join Growth by Month')
plt.show()</code></pre>
	<img src="/images/bonds/user_growth_linechart.png" alt="" class="vis"> <img src="/images/bonds/user_month.png" alt=""  class="vis">
	<div class="desc">In the daily registration chart, we can see that October is the month with the lowest and highest number of registration,
		meanwhile when we try to visualise by monthly basis we can see that September is the month with the highest number of registration, around 5200 users signed up.
		Next, we want to see the comparison by user's gender.</div>
	<pre><code>gender = data1[['user_id', 'user_gender']].groupby('user_gender').count()
plt.pie(gender.user_id, labels=gender.index , startangle=90, shadow=True,explode=(0.1, 0.1), autopct='%1.2f%%')
plt.title('Users\' Gender Distribution')
plt.show()			</code></pre>	
<div class="center"><img src="/images/bonds/user_gender.png" alt="" class="center"></div>
<div class="desc">The user's gender distribution chart show that around 61.02% of our users are male, meanwhile the rest are female.
	Then we will try to visualise the user's range and source of income to see more details of it.
</div>
<pre><code>fig, ax = plt.subplots(figsize=(8, 8), subplot_kw=dict(aspect="equal"))
income_source = data1[['user_id', 'user_income_source']].groupby('user_income_source').count
def func(pct, allvals):
	absolute = int(np.round(pct/100.*np.sum(allvals)))
	return "{:.1f}%\n({:d} users)".format(pct, absolute)

wedges, texts, autotexts = ax.pie(income_source.user_id, autopct=lambda pct: func(pct, income_source.user_id),
	textprops=dict(color="black"), explode=(1,0,0,0,0,0,0,0,0,0))
ax.legend(wedges, income_source.index,
	title="Income Source",
	loc="upper left",
	bbox_to_anchor=(1, 0, 0.5, 1))
plt.setp(autotexts, size=8, weight="bold")
ax.set_title("User's Income Source"
plt.show()			</code></pre>	
<div class="center"><img src="/images/bonds/user_income_source.png" alt=""></div>
<div class="desc">We read the chart counterclockwise start from the exploded pie.
	It shows that the lowest income source is from Bunga Simpanan (Saving's interest) with 0.2%.
whilst the majority of the income source is from Gaji (Salary) with 62.1% or equal to 9131 users.
Then we will see for the user's income range.</div>
<pre><code>fig, ax = plt.subplots(figsize=(6, 5))
ax = sns.countplot(y= data1.user_income_range, data = data1)

ax.set_title('User Income Range')
for x in ax.containers:
	ax.bar_label(x, label_type='edge')

plt.show()			</code></pre>
<div class="center"><img src="/images/bonds/user_income_range.png" alt="" class="center"></div>
<div class="desc">In the user income range chart, it shows the majority of user's income range is less than 10 Million Rupiah (approx 630USD) with 6275 users.
	Nevertheless, there are 27 users with the highest income range - 1 Billion Rupiah (approx 63000USD) which is our potential big investor.
	We also, will try to combine between income source and range to see the breakdown of it.
</div>	
<pre><code>fig, ax = plt.subplots(figsize=(12, 8))
ax = sns.countplot(y= data1.user_income_source, hue=data1.user_income_range, data = data1)
ax.set_title('Income source and range')
for x in ax.containers:
	ax.bar_label(x, label_type='edge')
ax.legend(loc='best', fontsize=8)
plt.show()</code></pre>
<div class="center"><img src="/images/bonds/income_source_range.png" alt=""></div>
<div class="desc">The income range and source chart, we can see there are 2835 of our users had wages less than 10 Million Rupiah.
	Moreover, the majority of our user's salary income range is between 10 Million to 50 Million Rupiah with the total of 3483 users.
	We can also notice that there are 10 of users had salary more than 1 Billion Rupiah. We will try to visualise the distribution of our user's occupation.
</div>
<pre><code>fig, ax = plt.subplots(figsize=(10, 5))
ax =sns.countplot(x=data1.user_occupation)
for x in ax.containers:
	ax.bar_label(x, label_type='edge')
ax.set_title('User occupation')
plt.show()</code></pre>
<div class="center"><img src="/images/bonds/occupation.png" alt=""></div>
<div class="desc">The users' occupation chart shows that the majority of our users are Pelajar (Student) with total of 7887 user.
	Which is make sense that our majority income range is less than 10 Million.
	We will try to combine the income range and user occupation to see more details of it.</div>
<pre><code>fig, ax = plt.subplots(figsize=(12, 8))
ax = sns.countplot(y= data1.user_occupation, hue=data1.user_income_range, data = data1)
ax.set_title('Income range and occupation')
for x in ax.containers:
	ax.bar_label(x, label_type='edge')
ax.legend(loc='right', fontsize=8)
plt.show()</code></pre>
<div class="center"><img src="/images/bonds/income_range_occupation.png" alt=""></div>
<div class="desc">When we combined the income range and occupation, we found an interesting information that we have 17 students with income range more than 500 Million Rupiah.
	So we will investigate a little bit further about the 17 students.
</div>
<pre><code>pelajar_age = data1.query('user_occupation == \'Pelajar\' and (user_income_range == \'> Rp 500 Juta - 1 Miliar\' or user_income_range == \'> Rp 1 Miliar\')')</code></pre>
<table id="pelajar" style="overflow-y: scroll;">
	<thead>
		<tr style="text-align: right;">
		  <th></th>
		  <th>user_id</th>
		  <th>registration_import_datetime</th>
		  <th>user_gender</th>
		  <th>user_age</th>
		  <th>user_occupation</th>
		  <th>user_income_range</th>
		  <th>referral_code_used</th>
		  <th>user_income_source</th>
		  <th>registration_month</th>
		</tr>
	  </thead>
	  <tbody>
		<tr>
		  <th>619</th>
		  <td>4228712</td>
		  <td>2021-10-05</td>
		  <td>Male</td>
		  <td>17</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>used referral</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>899</th>
		  <td>3795261</td>
		  <td>2021-08-08</td>
		  <td>Male</td>
		  <td>18</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>used referral</td>
		  <td>Lainnya</td>
		  <td>2021-08-31</td>
		</tr>
		<tr>
		  <th>1394</th>
		  <td>4376258</td>
		  <td>2021-10-19</td>
		  <td>Male</td>
		  <td>18</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>used referral</td>
		  <td>Gaji</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>2282</th>
		  <td>3818578</td>
		  <td>2021-08-16</td>
		  <td>Male</td>
		  <td>19</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-08-31</td>
		</tr>
		<tr>
		  <th>2609</th>
		  <td>3742646</td>
		  <td>2021-08-09</td>
		  <td>Female</td>
		  <td>20</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-08-31</td>
		</tr>
		<tr>
		  <th>3999</th>
		  <td>3749935</td>
		  <td>2021-08-04</td>
		  <td>Female</td>
		  <td>21</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-08-31</td>
		</tr>
		<tr>
		  <th>4076</th>
		  <td>4245492</td>
		  <td>2021-10-07</td>
		  <td>Female</td>
		  <td>21</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>4569</th>
		  <td>4355874</td>
		  <td>2021-10-17</td>
		  <td>Male</td>
		  <td>21</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>used referral</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>6135</th>
		  <td>4239037</td>
		  <td>2021-10-06</td>
		  <td>Female</td>
		  <td>23</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>used referral</td>
		  <td>Gaji</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>8322</th>
		  <td>4371352</td>
		  <td>2021-10-19</td>
		  <td>Male</td>
		  <td>25</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>used referral</td>
		  <td>Gaji</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>8871</th>
		  <td>3959126</td>
		  <td>2021-09-02</td>
		  <td>Female</td>
		  <td>26</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>used referral</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-09-30</td>
		</tr>
		<tr>
		  <th>9063</th>
		  <td>4342801</td>
		  <td>2021-10-17</td>
		  <td>Male</td>
		  <td>26</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>None</td>
		  <td>Gaji</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>9725</th>
		  <td>4270298</td>
		  <td>2021-10-09</td>
		  <td>Female</td>
		  <td>27</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>10101</th>
		  <td>4134537</td>
		  <td>2021-09-24</td>
		  <td>Male</td>
		  <td>28</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>None</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-09-30</td>
		</tr>
		<tr>
		  <th>10925</th>
		  <td>4338825</td>
		  <td>2021-10-15</td>
		  <td>Male</td>
		  <td>29</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 1 Miliar</td>
		  <td>used referral</td>
		  <td>Lainnya</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>11617</th>
		  <td>4164878</td>
		  <td>2021-10-02</td>
		  <td>Male</td>
		  <td>31</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>used referral</td>
		  <td>Keuntungan Bisnis</td>
		  <td>2021-10-31</td>
		</tr>
		<tr>
		  <th>11950</th>
		  <td>3858112</td>
		  <td>2021-08-18</td>
		  <td>Female</td>
		  <td>32</td>
		  <td>Pelajar</td>
		  <td>&gt; Rp 500 Juta - 1 Miliar</td>
		  <td>None</td>
		  <td>Gaji</td>
		  <td>2021-08-31</td>
		</tr>
	  </tbody>
</table>
<div class="desc">It's interesting that we have few users with age below 20, as a student with income range above 500 Million Rupiah and the income source is from business profit.
	There is a possibility with the wrong information that the user provided or they might born with a silver spoon.
	However, we just leave it as is for now and take notes just in case we might need some adjustment prior building the model.
The next thing we want to check is, how many percent of our user registered using referral code.
This might also will help to decide what type of campaigne approach to increase the registration number.</div>
<pre><code>referral_code = data1[['user_id', 'referral_code_used']].groupby('referral_code_used').count()
plt.pie(referral_code.user_id, labels=referral_code.index, startangle=90, shadow=True,explode=(0.1, 0.1), autopct='%1.2f%%')
plt.title('Referral Code Comparison')
plt.show()</code></pre>
<div class="center"><img src="/images/bonds/referral_code.png" alt=""></div>
<div class="desc">We can see from the referral code comparison that only 38.09% of our users using referral code during their registration process.
	We can create an announcement on the company website or application about bonus credit if the user refer some friends to register with us.
	This will increase the number of new users, transactions, also a cheaper version of advertisement as we announce it using our private platform so third party advertisement cost needed.
	As well as encourage the current users to make more transaction using the bonus credit and so on.
	We will check the average age of our users.
</div>
<pre><code>data1['user_age'].describe()</code>
	count    14712.000000
	mean        27.176591
	std          8.552585
	min         17.000000
	25%         21.000000
	50%         25.000000
	75%         31.000000
	max         83.000000
	Name: user_age, dtype: float64</pre>
	<div class="desc">The description show that the average age of our user is 27 years old. With the youngest is 17 and oldest is 83 years old.
		We will try to visualise the distribution of it by using histogram.
	</div>
	<pre><code>data1['user_age'].hist(figsize = (5,5))
plt.title('User age distribution')</code></pre>
	<div class="center"><img src="/images/bonds/age_histogram.png" alt=""></div>
	<div class="desc">The histogram show that most of our users are in age group 20's and 30's.
		The next step we will do is using zscore to calculate if there's any outliers.</div>
<pre><code>mean = np.mean(data1.user_age)
std = np.std(data1.user_age)
outlier = []
for i in data1.user_age:
	z = (i-mean)/std
	if z > 3:
		outlier.append(i)
print('outliers in dataset are', set(outlier))
sns.boxplot(x=data1.user_age)</code>
	outliers in dataset are {53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 69, 71, 73, 74, 76, 82, 83}</pre>
<div class="center"><img src="/images/bonds/outliers.png" alt=""></div>
<div class="desc">From the z-score calculation, it shows the ourliers from the users age are from 53 years and older.
	We will visualise the distribution and check how many users are in the outliers then merging the dataset 1 and dataset 2 to see how many percentage of the outlier's user contribute with transaction before we decide to remove the outliers or just leave it as is.</div>
<pre><code>user_outliers = data1.loc[data1.user_age>=53,:]
total_out = user_outliers.user_id.count()
percentage_outliers = (total_out/total_user)
print(f'Total users in outliers : {total_out} OR {percentage_outliers:.2%} from total user')
fig, ax = plt.subplots(figsize=(6, 5))
ax = sns.countplot(y= user_outliers.user_age, data = user_outliers)
ax.set_title('User distribution above 53 years of age')
for x in ax.containers:
	ax.bar_label(x, label_type='edge')
plt.show()</code>
	Total users in outliers : 264 OR 1.79% from total user</pre>
<div class="center"><img src="/images/bonds/outliers_dist.png" alt=""></div>
<div class="desc">The chart above shows that we have the total of 264 users in the outliers category or equal to 1.79% from the total user.
	With the highest distribution on 54 years of age and lowest start from 73 years.
We will explore and clean the dataset 2 before merging and continue handling our outliers.</div>
<h2 class="major">Dataset 2 Exploration</h2>
<div class="desc">We want to check how many rows of data that we have on dataset 2 and the total number of users that making transactions.</div>
<pre><code>print(f'Total rows: {data2.shape[0]} ,columns: {data2.shape[1]}')
transcation_users = data2['user_id'].nunique()
print(f'Total users making transaction period August - October 2021 = {transcation_users} users or {(transcation_users/total_user):.2%}')
data2.info()</code>
	Total rows: 158811 ,columns: 14
	Total users making transaction period August - October 2021 = 8277 users or 56.26%
	RangeIndex: 158811 entries, 0 to 158810
	Data columns (total 14 columns):
	#   Column                               Non-Null Count   Dtype  
	---  ------                               --------------   -----  
	0   user_id                              158811 non-null  int64  
	1   date                                 158811 non-null  object 
	2   Saham_AUM                            106292 non-null  float64
	3   Saham_invested_amount                106292 non-null  float64
	4   Saham_transaction_amount             100839 non-null  float64
	5   Pasar_Uang_AUM                       131081 non-null  float64
	6   Pasar_Uang_invested_amount           131081 non-null  float64
	7   Pasar_Uang_transaction_amount        124273 non-null  float64
	8   Pendapatan_Tetap_AUM                 105946 non-null  float64
	9   Pendapatan_Tetap_invested_amount     105946 non-null  float64
	10  Pendapatan_Tetap_transaction_amount  100497 non-null  float64
	11  Campuran_AUM                         5352 non-null    float64
	12  Campuran_invested_amount             5352 non-null    float64
	13  Campuran_transaction_amount          5117 non-null    float64
	dtypes: float64(12), int64(1), object(1)</pre>
	<div class="desc">From the data description above, we can see that there are 158811 rows and 14 column of data in the dataset 2.
	Also, it's only 8277 users making transaction or equal to 56.26% from the total users.
	The company can create some campaigne to encourage the new users to make a new transaction.
	In addition, we can see from the data information we have plenty of column contained null value.
	We will check to confirmed this information and change the 'date' column name to trans_date to avoid ambiguity with the method.
	</div>
	<pre><code>data2.rename(columns={"date": "trans_date"}, inplace=True)
data2['trans_date'] = pd.to_datetime(data2['trans_date'])
data2.isnull().sum()</code>
	user_id                                     0
	trans_date                                  0
	Saham_AUM                               52519
	Saham_invested_amount                   52519
	Saham_transaction_amount                57972
	Pasar_Uang_AUM                          27730
	Pasar_Uang_invested_amount              27730
	Pasar_Uang_transaction_amount           34538
	Pendapatan_Tetap_AUM                    52865
	Pendapatan_Tetap_invested_amount        52865
	Pendapatan_Tetap_transaction_amount     58314
	Campuran_AUM                           153459
	Campuran_invested_amount               153459
	Campuran_transaction_amount            153694
	dtype: int64</pre>
	<div class="desc">The information above confirmed our findings, and refer to the dataset information all of the column with the null value is a transactions column.
		So, we will be changing the data to 0 instead of null.</div>
<pre><code>data2.fillna(0, inplace=True)
data2.isnull().sum()</code>
	user_id                                0
	trans_date                             0
	Saham_AUM                              0
	Saham_invested_amount                  0
	Saham_transaction_amount               0
	Pasar_Uang_AUM                         0
	Pasar_Uang_invested_amount             0
	Pasar_Uang_transaction_amount          0
	Pendapatan_Tetap_AUM                   0
	Pendapatan_Tetap_invested_amount       0
	Pendapatan_Tetap_transaction_amount    0
	Campuran_AUM                           0
	Campuran_invested_amount               0
	Campuran_transaction_amount            0
	dtype: int64</pre>
	<div class="desc">The null value has been replaced, the next step we will do is to group the dataset 2 by users into a new dataset.
		As we know, the AUM and invested amount is updated daily, meanwhile transactions column is the accumulation of the transaction. Invested dataframe:</div>
<pre><code>invested_AUM = data2.sort_values(by='trans_date').drop_duplicates(subset=['user_id'], keep='last').reset_index(drop=True)
invested_AUM = invested_AUM.drop(['Saham_transaction_amount','Pasar_Uang_transaction_amount',
	'Pendapatan_Tetap_transaction_amount','Campuran_transaction_amount'], axis=1).copy()
print(f'Total rows: {invested_AUM.shape[0]}, columns: {invested_AUM.shape[1]}\n Invested:')
invested_AUM.head()</code>
	Total rows: 8277, columns: 10
	Invested:</pre>
	<div class="table-wrapper">
		<table>
			<thead>
				<tr style="text-align: right;">
				  <th></th>
				  <th>user_id</th>
				  <th>trans_date</th>
				  <th>Saham_AUM</th>
				  <th>Saham_invested_amount</th>
				  <th>Pasar_Uang_AUM</th>
				  <th>Pasar_Uang_invested_amount</th>
				  <th>Pendapatan_Tetap_AUM</th>
				  <th>Pendapatan_Tetap_invested_amount</th>
				  <th>Campuran_AUM</th>
				  <th>Campuran_invested_amount</th>
				</tr>
			  </thead>
			  <tbody>
				<tr>
				  <th>0</th>
				  <td>3786300</td>
				  <td>2021-09-30</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>1</th>
				  <td>3760891</td>
				  <td>2021-09-30</td>
				  <td>258975.00</td>
				  <td>249864.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>553302.00</td>
				  <td>550000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>2</th>
				  <td>4096532</td>
				  <td>2021-09-30</td>
				  <td>13803192.00</td>
				  <td>13352136.00</td>
				  <td>2390277.00</td>
				  <td>2387932.00</td>
				  <td>8134491.00</td>
				  <td>8149154.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>3</th>
				  <td>2836295</td>
				  <td>2021-09-30</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>4</th>
				  <td>2839273</td>
				  <td>2021-09-30</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>10028.00</td>
				  <td>10000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
			  </tbody>
		</table>
	</div>
<div class="desc">Transactions dataframe:</div>
<pre><code>sum_trans_total = data2.groupby('user_id')[['Saham_transaction_amount', 'Pasar_Uang_transaction_amount',
	'Pendapatan_Tetap_transaction_amount', 'Campuran_transaction_amount']].sum()
print(f'Total rows:{sum_trans_total.shape[0]}, columns: {sum_trans_total.shape[1]}\nTransactions:')
sum_trans_total.head()</code>
	Total rows:8277, columns: 4
	Transactions:</pre>
<div class="table-wrapper">
	<table>
		<thead>
			<tr style="text-align: right;">
			  <th></th>
			  <th>Saham_transaction_amount</th>
			  <th>Pasar_Uang_transaction_amount</th>
			  <th>Pendapatan_Tetap_transaction_amount</th>
			  <th>Campuran_transaction_amount</th>
			</tr>
			<tr>
			  <th>user_id</th>
			  <th></th>
			  <th></th>
			  <th></th>
			  <th></th>
			</tr>
		  </thead>
		  <tbody>
			<tr>
			  <th>50701</th>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>50961</th>
			  <td>1300000.00</td>
			  <td>600000.00</td>
			  <td>1200000.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>53759</th>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>54759</th>
			  <td>0.00</td>
			  <td>2000000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>61414</th>
			  <td>-10000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
		  </tbody>
	</table>
</div>
<div class="desc">After creating the inveted and transactions dataframe, then we will merge both dataset into new_data2 and we will be using this dataset in the future.</div>
<pre><code>new_data2 = invested_AUM.merge(sum_trans_total, on='user_id')
print(f'Total rows: {new_data2.shape[0]}, columns:{new_data2.shape[1]}')
del invested_AUM, sum_trans_total
new_data2.head()</code>
	Total rows: 8277, columns:14</pre>
<div class="table-wrapper">
	<table>
		<thead>
			<tr style="text-align: right;">
			  <th></th>
			  <th>user_id</th>
			  <th>trans_date</th>
			  <th>Saham_AUM</th>
			  <th>Saham_invested_amount</th>
			  <th>Pasar_Uang_AUM</th>
			  <th>Pasar_Uang_invested_amount</th>
			  <th>Pendapatan_Tetap_AUM</th>
			  <th>Pendapatan_Tetap_invested_amount</th>
			  <th>Campuran_AUM</th>
			  <th>Campuran_invested_amount</th>
			  <th>Saham_transaction_amount</th>
			  <th>Pasar_Uang_transaction_amount</th>
			  <th>Pendapatan_Tetap_transaction_amount</th>
			  <th>Campuran_transaction_amount</th>
			</tr>
		  </thead>
		  <tbody>
			<tr>
			  <th>0</th>
			  <td>3786300</td>
			  <td>2021-09-30</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>-10000.00</td>
			  <td>-10000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>1</th>
			  <td>3760891</td>
			  <td>2021-09-30</td>
			  <td>258975.00</td>
			  <td>249864.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>553302.00</td>
			  <td>550000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>199864.00</td>
			  <td>-100000.00</td>
			  <td>450000.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>2</th>
			  <td>4096532</td>
			  <td>2021-09-30</td>
			  <td>13803192.00</td>
			  <td>13352136.00</td>
			  <td>2390277.00</td>
			  <td>2387932.00</td>
			  <td>8134491.00</td>
			  <td>8149154.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>10832136.00</td>
			  <td>1937932.00</td>
			  <td>6619154.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>3</th>
			  <td>2836295</td>
			  <td>2021-09-30</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>-100000.00</td>
			  <td>-100000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			</tr>
			<tr>
			  <th>4</th>
			  <td>2839273</td>
			  <td>2021-09-30</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>10028.00</td>
			  <td>10000.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>0.00</td>
			  <td>-50000.00</td>
			  <td>0.00</td>
			  <td>-40000.00</td>
			  <td>0.00</td>
			</tr>
		  </tbody>
	</table>
</div>
<div class="desc">Now, we get a new dataset that has been clean and aggregate by users then we will
	continue our investigation for our previous outliers with user age older than 53 years old.
	The first thing we will do is to merge the new dataset with user_outliers to see how many of the outliers contribute with the transaction.</div>
<pre><code>trans_outliers = user_outliers[['user_id', 'user_age']].merge(new_data2, on='user_id')
total_out_transaction = trans_outliers.user_id.nunique()
percentage_out_transaction = (total_out_transaction/transcation_users)
print(f'Total users in outliers making transaction: {total_out_transaction}
	OR {percentage_out_transaction:.2%} from the user that making transaction.')
trans_outliers.head()</code>
	Total users in outliers making transaction: 145 OR 1.75% from the user that making transactions.</pre>
	<div class="table-wrapper">
		<table>
			<thead>
				<tr style="text-align: right;">
				  <th></th>
				  <th>user_id</th>
				  <th>user_age</th>
				  <th>trans_date</th>
				  <th>Saham_AUM</th>
				  <th>Saham_invested_amount</th>
				  <th>Pasar_Uang_AUM</th>
				  <th>Pasar_Uang_invested_amount</th>
				  <th>Pendapatan_Tetap_AUM</th>
				  <th>Pendapatan_Tetap_invested_amount</th>
				  <th>Campuran_AUM</th>
				  <th>Campuran_invested_amount</th>
				  <th>Saham_transaction_amount</th>
				  <th>Pasar_Uang_transaction_amount</th>
				  <th>Pendapatan_Tetap_transaction_amount</th>
				  <th>Campuran_transaction_amount</th>
				</tr>
			  </thead>
			  <tbody>
				<tr>
				  <th>0</th>
				  <td>3816789</td>
				  <td>53</td>
				  <td>2021-09-30</td>
				  <td>297141.00</td>
				  <td>290000.00</td>
				  <td>40235.00</td>
				  <td>40000.00</td>
				  <td>270673.00</td>
				  <td>270000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>100000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>1</th>
				  <td>3049927</td>
				  <td>53</td>
				  <td>2021-09-30</td>
				  <td>41545.00</td>
				  <td>40000.00</td>
				  <td>9997.00</td>
				  <td>10000.00</td>
				  <td>49925.00</td>
				  <td>50000.00</td>
				  <td>910285.00</td>
				  <td>899000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>149000.00</td>
				</tr>
				<tr>
				  <th>2</th>
				  <td>3836491</td>
				  <td>59</td>
				  <td>2021-09-30</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>10012.00</td>
				  <td>10000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>3</th>
				  <td>3783302</td>
				  <td>57</td>
				  <td>2021-09-30</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>107322.00</td>
				  <td>110431.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>-370000.00</td>
				  <td>-100000.00</td>
				  <td>-419569.00</td>
				  <td>0.00</td>
				</tr>
				<tr>
				  <th>4</th>
				  <td>3820160</td>
				  <td>58</td>
				  <td>2021-09-30</td>
				  <td>62351.00</td>
				  <td>60000.00</td>
				  <td>20032.00</td>
				  <td>20000.00</td>
				  <td>145083.00</td>
				  <td>145000.00</td>
				  <td>0.00</td>
				  <td>0.00</td>
				  <td>30000.00</td>
				  <td>0.00</td>
				  <td>75000.00</td>
				  <td>0.00</td>
				</tr>
			  </tbody>
		</table>
	</div>
	<div class="desc">From the total of 264 outliers users, apparently there are only 145 of them making
		transactions or it equal to 1.75% from the total of new dataset 2.
		That number is relatively small, which it's okay if we just exclude the outliers from our analysis.
		However, we will double check if they contribute in a big amount of transaction or
		not to avoid removing big investor that hide in the outliers. 
	</div>
</p> 
							</div>
						</div>
					</section>
			</div>

		<!-- Footer -->
		<footer id="footer" class="wrapper style1-alt">
			<div class="inner">
				<ul class="menu">
					<li>&copy; Devy Ratnasari</li>
					<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
				</ul>
			</div>
		</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body></html>